 ## [ 해시 함수 ]

### 핵심 한 줄 요약
    해시 함수의 간단한 정의를 이해하고, 민감한 데이터에는 소금 팍팍 치자

### 인트로
- 해시 함수는 소프트웨어의 성능과 보안을 책임지는 매우 중요한 요소 중 하나이다.
- 해시 함수를 사용하면 데이터양이 많아져도 일관된 성능을 보장하는 구조로 설계할 수 있고, 민감한 데이터의 변조를 막을 수 있다.

### 해시 함수?
- 임의의 입력값을 해시 값으로 변환하는 함수이다.
- 해시(값)?:
  - 입력 데이터를 고정된 길이의 데이터로 변환된 값
  - 해시 코드, 체크섬' 이라고도 한다.
- 입력값이 들어올 수 있는 종류로는 문자, 숫자, 바이너리 즉 거의 모든 형태의 데이터가 값으로 들어올 수 있다.
- 입력값 -> 함수 동작 중 -> 해시 값(고정된 길이의 바이너리) => 이 과정을 해싱이라고 한다.
- 즉 해싱에서 사용하는 함수를 해시 함수라고 한다.
- 특징:
  - 입력값이 동일하면 결과도 동일하다.
  - 입력값의 길이와 상관없이 해시 값의 길이는 항상 동일하다.
  - 서로 다른 입력값이 동일한 해시 값을 만들 확률은 매우 낮다.
- 안전한 해시 함수의 조건
  - 제 1 역상 공격이 불가능해야 한다. => (해시 값으로 입력값을 복원하는 방법)
  - 제 2 역상 공격이 불가능 해야 한다. => (서로 다른 입력값으로 같거나 비슷한 해시 값을 찾는 방법)

### 어디서 쓸까?
- 비밀번호 검증:
  - 입력값이 이전에 저장한 값과 같은지 비교할 수 있어서 사용한다.
  - 사용자의 비밀번호는 해싱 후에 저장하고 즉 원래의 값을 저장하지 않고도 검증을 할 수 있다.
  - 해시 값으로는 비밀번호를 알아낼 수 없으니 아주 바람직하다.
- 무결성 검증:
  - 블록체인 거래 정보를 해시 값으로 만든 후 장부에 저장한다.
  - 그러면 다른 곳에서 거래 정보를 바꿔도 해시 값이 달라서 데이터가 변조 됐다는 걸 바로 알 수 있다.

### 해시 함수의 종류
- MD5:
  - 1990년대 이후부터 사용해온 해시 알고리즘이다.
  - 1996년에 MD5의 설계상 결함(해시 충돌)이 발견 되어서 치명적이지는 않지만 요즘은 다른 안전한 알고리즘 사용을 권장한다.
  - 현재에 MD5 알고리즘을 보안 관련 용도로 쓰는 것은 권장하지 않는다.
- SHA-1:
  - 미국 국가안보국(NSA)에서 설계한 표준 해시 함수이다.
  - 최대 2의 64승 비트 => 약 200테라 데이터를 입력값으로 사용 가능하고 고정된 160비트 해시 값을 생성 한다.
  - MD5처럼 요즘은 잘 사용하지 않는다 => 해시 충돌 방법이 발견 되었기 때문이다.
- SHA-2:
  - 이 알고리즘은 해시 함수 하나를 지칭하지 않는다.
  - SHA-224, SHA-256, SHA-384, SHA-512 등 여러 해시 함수를 뜻한다.
  - SHA-1 보다 안전하기 때문에 취약점 발견 후 가장 대중적으로 사용하고 있고 권장하고 있다.
- 해시 함수가 안전할 수록 시간이 오래 걸린다 => 긴 길이를 사용하기 때문이다.

### 추가 설명
- SHA-256, SHA-512 해시 함수를 사용하면 민감한 데이터를 안전하게 저장할 수 있지만 계산하는 비용이 매우 크다.
- 그래서 무차별 대입, 디도스 같이 요청을 마아아악 보내면 서비스 장애가 쉽게 날 수도 있다.
- 대규모 사용자를 기반으로 한 서비스를 만들 때는 SHA-2 형식 대신 blake2 해시 함수를 사용해야 한다. => https://www.blake2.net/
- 민감한 데이터는 그대로 해싱하지 말고, salt (소금) 즉 나만의 문자열을 조합해서 해싱하자.
