## [ 데이터 압축(zlib) ]

### 핵심 한 줄 요약
    압축의 고려 사항을 이해하고 사용하며, 나중에 한 번 직접 만들어 보자!    

### 인트로
- 압축 알고리즘은 단순한 파일 데이터 압축 외에도 이미지나, 동영상을 압축할 때도 사용한다.
- 웹 브라우저가 서버와 데이터를 주고받을 때도 트래픽 비용을 줄이기 위해 사용한다.
- zip 파일을 압축할 때는 DEFLATE 알고리즘을 사용한다. => 따로 찾아보자
- 어떤 형태로 동작하는지, 압축 시 고려사항 등을 이 책에서 소개한다.

### zip, zlib, DEFLATE, INFLATE
- zip:
  - DEFLATE 알고리즘으로 압축된 파일을 뜻한다.
- zlib:
  - DEFLATE 알고리즘을 제공하는 라이브러리 => 가장 많이 사용하는 무료 압축 라이브러리
- INFLATE:
  - 알고리즘으로 압축으로 해제할 때 사용한다.

### 압축 시 중요한 요소
- 압축 원리:
  - 압축은 공통된 부분을 하나로 찾아 묶은 다음 저장하는 행위이다.
  - ex) 'A','A','A' 대신에 'A3' 라고 표기하는 것과 비슷하다.
  - 공통된 부분을 찾기 위해 DEFLATE 알고리즘은 L777이라는 다른 알고리즘을 사용한다.
  - 이렇게 찾은 공통된 부분을 허프만 부호화 알고리즘을 사용하여 무손실 압축을 한다.
- 손실 압축과 무손실 압축:
  - 손실 압축
    - 압축할 때 원본 데이터가 손실되기 때문에 압축한 파일을 재구성 할 수 없다.
    - 압축률이 매우 높다.
    - 손실이 중요하지 않다면 좋은 선택지다.
  - 무손실 압축
    - 원본 데이터를 100% 재구성할 수 있는 알고리즘을 사용한다. => DEFLATE 알고리즘
    - 압축률은 손실 압축 보다 떨어진다.
    - 원본 데이터를 유지해야 한다면 무손실 압축을 해야 한다.
- 압축률:
  - 원본과 압축 데이터를 비교했을 때 얼마나 많은 데이터를 압축했는지를 나타내는 지표
  - ex) 원본: 10MB, 압축 데이터 2MB => 5:1
  - 압축률이 높으면 높을수록 많은 압축, 해제 할 때 CPU 자원을 많이 쓴다.
  - 압축 알고리즘은 기본적으로 압축이 끝나기 전까지는 압축된 파일의 크기, 압축률을 알 수 없다.
- 압축 레벨:
  - 모든 압축 라이브러리는 압축 레벨을 설정할 수 있다.
  - 1 ~ 10 까지 있으며 높을 수록 더 많은 CPU 자원과 메모리가 필요하다.
- 압축 속도:
  - 압축할 때 걸리는 시간
  - 속도가 빠를수록 압축률이 낮아지지만 CPU 성능만 높여도 시간을 줄일 수 있다.
- 압축 해제 속도:
  - 압축된 파일을 해제하는데 걸리는 시간
  - 압축 속도보다 월등히 빠르다.
  - 압축은 데이터 패턴 파악 후 최적화된 알고리즘으로 진행, 해제는 저장된 패턴 기준으로 단순히 복원만 진행
- 체크섬:
  - 바이너리 데이터로부터 추출한 값
  - 데이터를 받는 쪽에 전달 가능
  - 매우 빠른 속도로 값을 만들지만, 해시 함수의 기능은 없어 데이터 유실, 변조 확인만 할 수 있다.

### 추가 고려 사항
- 압축 기능 적용 시 클라이언트, 서버가 받는 부하가 적절한지 확인해야 한다.
- 데이터 크기가 가변적인 환경에서는 모든 데이터를 압축하지 않는게 좋다.
- 웹 서비스의 경우, 브라우저가 DEFLATE를 지원하지 않을 수도 있다는 점을 염두해 둔다.
